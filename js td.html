<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>ToDo List Persistante</title>
</head>
<body>

  <h1>Ma ToDo List</h1>

  <input type="text" id="todo-input" placeholder="Nouvelle tÃ¢che..." />
  <button id="add-btn">Ajouter</button>

  <ul id="todo-list"></ul>

  <script>
  // SÃ©lection des Ã©lÃ©ments HTML
    const form = document.getElementById('taskForm');
    const input = document.getElementById('taskInput');
    const select = document.getElementById('categorySelect');

    // Chargement des tÃ¢ches depuis le localStorage ou tableau vide
    let tasks = JSON.parse(localStorage.getItem('tasks')) || [];

    // ğŸ” Fonction pour sauvegarder dans localStorage
    function saveTasks() {
      localStorage.setItem('tasks', JSON.stringify(tasks));
    }

    // ğŸ”„ Fonction dâ€™affichage des tÃ¢ches dans chaque catÃ©gorie
    function renderTasks() {
      // Boucle sur chaque catÃ©gorie
      ['a-faire', 'en-cours', 'termine'].forEach(cat => {
        const container = document.querySelector(`#${cat} .task-list`);
        container.innerHTML = ''; // vide la section avant de la remplir

        // Filtrer les tÃ¢ches selon la catÃ©gorie actuelle
        tasks.filter(t => t.category === cat).forEach(task => {
          // CrÃ©e le bloc de la tÃ¢che
          const taskEl = document.createElement('div');
          taskEl.className = 'task' + (task.done ? ' done' : '');

          const span = document.createElement('span');
          span.textContent = task.text;

          // CrÃ©ation du conteneur pour les boutons
          const btnContainer = document.createElement('div');
          btnContainer.className = 'task-buttons';

          // âœ” Bouton de validation
          const doneBtn = document.createElement('button');
          doneBtn.className = 'done-btn';
          doneBtn.textContent = 'âœ”';
          doneBtn.onclick = () => {
            task.done = !task.done; // inverse le statut terminÃ©
            saveTasks();
            renderTasks(); // rafraÃ®chit lâ€™affichage
          };

          // ğŸ—‘ Bouton de suppression
          const deleteBtn = document.createElement('button');
          deleteBtn.className = 'delete-btn';
          deleteBtn.textContent = 'ğŸ—‘';
          deleteBtn.onclick = () => {
            tasks = tasks.filter(t => t.id !== task.id); // supprime du tableau
            saveTasks();
            renderTasks();
          };

          // Ajoute les boutons
          btnContainer.appendChild(doneBtn);
          btnContainer.appendChild(deleteBtn);

          // Assemble la tÃ¢che
          taskEl.appendChild(span);
          taskEl.appendChild(btnContainer);
          container.appendChild(taskEl);
        });
      });
    }

    // ğŸ“¤ Soumission du formulaire
    form.addEventListener('submit', function(e) {
      e.preventDefault(); // empÃªche le rechargement
      const text = input.value.trim(); // rÃ©cupÃ¨re et nettoie le texte
      const category = select.value;

      if (text !== '') {
        const newTask = {
          id: Date.now(), // identifiant unique basÃ© sur le temps
          text,
          category,
          done: false
        };
        tasks.push(newTask); // ajoute la tÃ¢che au tableau
        saveTasks();         // sauvegarde dans localStorage
        renderTasks();       // actualise lâ€™affichage
        input.value = '';    // vide le champ texte
      }
    });

    // ğŸš€ Affichage initial
    renderTasks();

  
  </script>
</body>
</html>